# Makefile for NeuG

# Define project name here
PROJECT = neug

CHOPSTX = ../chopstx

# Define linker script file here
LDSCRIPT= neug.ld

CSRC = sys.c aes-constant-ft.c \
       main.c sha256.c random.c usb_stm32f103.c adc_stm32f103.c

###################################
CROSS = arm-none-eabi-
CC   = $(CROSS)gcc
LD   = $(CROSS)gcc
OBJCOPY   = $(CROSS)objcopy

MCU   = cortex-m3
CWARN = -Wall -Wextra -Wstrict-prototypes
# DEFS: Add -DHAVE_SYS_H when you are sure that it's sys version 2.0.
DEFS  = -DFREE_STANDING
OPT   = -O3 -Os -g
LIBS  =

#######################
include $(CHOPSTX)/rules.mk

board.h:
	@echo Please make a symbolic link \'board.h\' to a file in $(CHOPSTX)/board;
	@exit 1

sys.c: board.h

distclean: clean
	-rm -f neug.ld config.h board.h \
	       usb-strings.c.inc usb-vid-pid-ver.c.inc
